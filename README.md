# cs_cart
### Реализованный функционал
* В рамках задания необходимо создать новую сущность - Отделы
* В панели администратора CS-Cart в меню Покупатели (англ. Users) необходимо создать подраздел Отделы
* При переходе в меню Покупатели > Отделы должен отображаться интерфейс управления отделами. Основные функции:
    * Возможность удалить отдел
    * Возможность перейти на страницу создания отдела
    * Возможность перейти на страницу редактирования отдела
    * Возможность поменять статус отдела
    * Возможность поиска по статусу отдела и названию отдела
    * Возможность сортировки по полям таблицы (название, статус)
    * Паджинация
* Список отделов визуально должен быть оформлен в общей стилистики панели администратора CS-Cart и содержать минимум три поля (логотип, название, статус). В качестве аналога рекомендуется использовать Коллекции товаров из видеоуроков
* При создании нового отдела должны быть доступны следующие поля:
    * Логотип (изображение)
    * Название (языкозависимая переменная)
    * Описание (языкозависимая переменная)
    * Руководитель (пользователь, задается пикером пользователей, можно выбрать только одного пользователя)
    * Сотрудники (пользователи, задается пикером пользователей)
    * Статус отдела (Вкл./выкл)
* В витрине магазина должна быть доступна новая страница списка отделов (dispatch необходимо придумать самому).
* На списке отделов в витрине необходимо должны отображаться следующие поля отдела:
    * логотип - по клику переход на карточку отдела
    * название отдела - по клику переход на карточку отдела
    * фамилия и имя руководителя
* На списке отделов должна также присутствовать паджинация, а также отображаться только отделы со статусом Вкл.
* Карточку отдела в витрина рекомендуется сделать по аналогии со страницей бренда с допущением, что список товаров на бренде     = список сотрудников отдела.
### Окружение
1. Используется Open Server со следующими настройками:
    [![imageup.ru](https://imageup.ru/img131/4137410/image_2022-12-25_23-54-12.png)](https://imageup.ru/img131/4137410/image_2022-12-25_23-54-12.png.html)
2. Версия CS-Cart **v4.15.2_ru**

### Установка
1. Следует склонировать мой репозиторий, ветка **Advanced-module-task** в папку ..\OSPanel\domains 
2. После чего добавить в созданную папку cs-cart файл config.local.php, который я прикрепил к отправленному заданию
3. При необходимости изменить имя пользователя, название и пароль базы данных 
    [![imageup.ru](https://imageup.ru/img172/4137452/image_2022-12-26_00-05-45.png)](https://imageup.ru/img172/4137452/image_2022-12-26_00-05-45.png.html)
4. Зайти в phpMyAdmin и в базе данных cs_cart создать **3** новых таблицы при помощи следующих SQL запросов:
    
    ````  
    CREATE TABLE IF NOT EXISTS cscart_departments (
    	department_id INT(11) unsigned NOT NULL auto_increment,
        position INT(11) unsigned NOT NULL default '0',
        status varchar(1) NOT NULL default 'A',
        timestamp INT(11) unsigned NOT NULL default '0',
        upd_timestamp INT(11) unsigned NOT NULL default '0',
        lider_id INT(11) unsigned NOT NULL default '0',
        KEY (lider_id),
        PRIMARY KEY (department_id)
    ) ENGINE=INNODB DEFAULT CHARSET=utf8
    ````
    ````
    CREATE TABLE IF NOT EXISTS cscart_departments_descriptions (
    	department_id INT(11) unsigned NOT NULL default '0',
        lang_code char(2) NOT NULL default '',
        department varchar(255) NOT NULL default '',
        description text null,
        PRIMARY KEY (department_id, lang_code)
    ) ENGINE=INNODB DEFAULT CHARSET=utf8
    ````  
    ````
    CREATE TABLE IF NOT EXISTS cscart_department_links (
    	department_id INT(11) unsigned NOT NULL default '0',
        user_id INT(11) unsigned NOT NULL default '0',
        KEY (user_id),
        KEY (department_id),
        PRIMARY KEY (department_id, user_id)
    ) ENGINE=INNODB DEFAULT CHARSET=utf8
    ````
### Использование
* Чтобы зайти в управление отделами (в их контроллер) нужно зайти в панель администратора и в под меню "Покупатели" выбрать     "Отделы":
    [![imageup.ru](https://imageup.ru/img143/4137496/image_2022-12-26_00-36-12.png)](https://imageup.ru/img143/4137496/image_2022-12-26_00-36-12.png.html)

* Чтобы зайти в меню отделы с витрины нужно нажать на "Мой профиль" и выбрать "Отделы"
    [![imageup.ru](https://imageup.ru/img87/4137503/image_2022-12-26_00-39-04.png)](https://imageup.ru/img87/4137503/image_2022-12-26_00-39-04.png.html)

